<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Christmas Effects</title>

<style>
/* ===============================
   SWINGING BAUBLES
================================ */

.swing-wrapper{
    position:absolute;
    top:0;
    transform-origin: top center;
    animation:swing ease-in-out infinite alternate;
    z-index:1000;
}

@keyframes swing{
    from{transform:rotate(-6deg);}
    to{transform:rotate(6deg);}
}

.string{
    width:2px;
    background:#FFC000;
    margin:0 auto;
    box-shadow:0 0 6px rgba(255,192,0,0.85);
}

.bauble{
    border-radius:50%;
    margin:0 auto;
    background:
        radial-gradient(circle at 35% 30%, #fff 5%, var(--c1) 35%, var(--c2) 80%);
    box-shadow:
        inset -2px -4px 8px rgba(0,0,0,.35),
        0 0 7px rgba(255,255,255,.35);
}

/* ===============================
   SNOW FALL
================================ */

#snow-container{
    pointer-events:none;
    position:fixed;
    inset:0;
    overflow:hidden;
    z-index:999;
}

.flake{
    position:absolute;
    color:white;
    user-select:none;
    pointer-events:none;
    top:-10px;
    animation: snowFall linear forwards;
}

@keyframes snowFall{
    from{
        transform: translateY(-10px);
        opacity:1;
    }
    to{
        transform: translateY(110vh);
        opacity:0;
    }
}

/* ===============================
   SNOW GROUND DRIFT
================================ */

#snow-ground {
    pointer-events: none;
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100vw;
    height: 0;
    overflow: visible;
    z-index: 2;
    transition: height 1.5s ease-out;
}

/* snow drift shape */
.snow-layer {
    position: absolute;
    bottom: 0;
    width: 100%;
    height: 100%;
    border-radius: 50% 50% 0 0 / 100% 100% 0 0; /* gives a soft curved slope */
    background: linear-gradient(to top, #fff, #f0f0f0 60%, #ddd 100%);
    filter: blur(2px);
    pointer-events: none;
}
   
.layer1{
    bottom:5px;
    background:linear-gradient(90deg,#fff,#f9f9f9,#fff);
    opacity:0.95;
    animation: wave 25s linear infinite;
}

.layer2{
    bottom:0px;
    background:linear-gradient(90deg,#eee,#ddd,#eee);
    opacity:0.8;
    animation: wave 35s linear infinite reverse;
}

.layer3{
    bottom:-6px;
    background:linear-gradient(90deg,#ddd,#cfcfcf,#ddd);
    opacity:0.6;
    animation: wave 45s linear infinite;
}

@keyframes wave{
    from { transform:translateX(0); }
    to { transform:translateX(-50%); }
}
</style>
</head>

<body>

<div id="snow-container"></div>

<div id="snow-ground">
    <div class="snow-layer layer1"></div>
    <div class="snow-layer layer2"></div>
    <div class="snow-layer layer3"></div>
</div>

<script>
/* ===============================
   BAUBLES
================================ */

const colors = [
    ["#ff3366","#a1002b"],
    ["#ffd24a","#a77300"],
    ["#44ffaa","#007c43"],
    ["#7b6bff","#281d88"]
];

for(let i=0;i<9;i++){
    const wrap=document.createElement("div");
    wrap.className="swing-wrapper";
    wrap.style.left=(5+i*(90/9))+"%";
    wrap.style.animationDuration=(3+Math.random()*2)+"s";

    const drop=40+Math.random()*60;

    const string=document.createElement("div");
    string.className="string";
    string.style.height=drop+"px";

    const bauble=document.createElement("div");
    bauble.className="bauble";

    const size=20+Math.random()*15;
    bauble.style.width=size+"px";
    bauble.style.height=size+"px";

    const color=colors[Math.floor(Math.random()*colors.length)];
    bauble.style.setProperty("--c1",color[0]);
    bauble.style.setProperty("--c2",color[1]);

    wrap.appendChild(string);
    wrap.appendChild(bauble);
    document.body.appendChild(wrap);
}

/* ===============================
   FALLING SNOW
================================ */

function spawnSnowflake(){

    const flake=document.createElement("div");
    flake.className="flake";

    flake.textContent="â„";
    flake.style.left=Math.random()*100+"vw";
    flake.style.fontSize=(Math.random()*12+10)+"px";
    flake.style.animationDuration=(Math.random()*6+6)+"s";

    document.getElementById("snow-container").appendChild(flake);

    setTimeout(()=>flake.remove(),10000);
}

setInterval(spawnSnowflake,350);

/* ===============================
   SNOW ACCUMULATION
================================ */

const SHIFT_START = 9;
const SHIFT_HOURS = 9;
const MAX_SNOW_HEIGHT = 10;

const MAX_SNOW_HEIGHT = 15; // max snow height in vh

function updateSnowBuildUp(){
    const now = new Date();
    const SHIFT_START = 9; // 9am
    const SHIFT_HOURS = 9; // 9-hour shift

    const start = new Date();
    start.setHours(SHIFT_START,0,0,0);

    let minsElapsed = Math.max(0,(now - start)/60000);
    let pct = Math.min(minsElapsed / (SHIFT_HOURS*60),1);

    let heightVH = pct * MAX_SNOW_HEIGHT;
    const snowGround = document.getElementById("snow-ground");
    snowGround.style.height = heightVH + "vh";

    // optional: add slight horizontal slope by skewing the layer
    const layer = snowGround.querySelector(".snow-layer");
    if(layer){
        layer.style.transform = `skewX(${5 - 10*pct}deg)`; // subtle slope changing with buildup
    }
}
setInterval(updateSnowBuildUp,60000);
updateSnowBuildUp();
</script>
   
<div id="snow-ground">
    <div class="snow-layer"></div>
</div>
   
</body>
</html>
